(function(){var e,t;window.jdgmCarousel=window.jdgmCarousel||{},jdgmCarousel._enqueuedFunctions=[],jdgmCarousel.enque=function(t){return jdgmCarousel._enqueuedFunctions.push(t),window.jdgm&&window.jdgm._doneSetup?e(jdgm.$):void 0},document.addEventListener("jdgm.doneSetup",function(){return e(jdgm.$)},!1),e=function(e){return jdgmCarousel._enqueuedFunctions=e.grep(jdgmCarousel._enqueuedFunctions,function(i){return t(e,i),!1})},t=function(e,t){var i;try{return t(e)}catch(r){return i=r,console.error(i)}}}).call(this),function(e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():e()}(function(){var e="undefined"!=typeof window?window:this;e.jdgm=e.jdgm||{};var t=e.jdgm.Glider=function(t,i){var r=this;if(t._glider)return t._glider;if(r.ele=t,r.ele.classList.add("jdgm-glider"),r.ele._glider=r,r.opt=Object.assign({},{slidesToScroll:1,slidesToShow:1,resizeLock:!0,duration:.5,easing:function(e,t,i,r,d){return r*(t/=d)*t+i}},i),r.animate_id=r.page=r.slide=0,r.arrows={},r._opt=r.opt,r.opt.skipTrack)r.track=r.ele.children[0];else for(r.track=document.createElement("div"),r.ele.appendChild(r.track);1!==r.ele.children.length;)r.track.appendChild(r.ele.children[0]);r.track.classList.add("jdgm-glider-track"),r.init(),r.resize=r.init.bind(r,!0),r.event(r.ele,"add",{scroll:r.updateControls.bind(r)}),r.event(e,"add",{resize:r.resize})},i=t.prototype;return i.init=function(e,t){var i=this,r=0,d=0;i.slides=i.track.children,[].forEach.call(i.slides,function(e,t){e.classList.add("jdgm-glider-slide"),e.setAttribute("data-gslide",t)}),i.containerWidth=i.ele.clientWidth;var n=i.settingsBreakpoint();if(t||(t=n),"auto"===i.opt.slidesToShow||"undefined"!=typeof i.opt._autoSlide){var a=i.containerWidth/i.opt.itemWidth;i.opt._autoSlide=i.opt.slidesToShow=i.opt.exactWidth?a:Math.max(1,Math.floor(a))}"auto"===i.opt.slidesToScroll&&(i.opt.slidesToScroll=Math.floor(i.opt.slidesToShow)),i.itemWidth=i.opt.exactWidth?i.opt.itemWidth:i.containerWidth/i.opt.slidesToShow,[].forEach.call(i.slides,function(e){e.style.height="auto",e.style.width=i.itemWidth+"px",r+=i.itemWidth,d=Math.max(e.offsetHeight,d)}),i.track.style.width=r+"px",i.trackWidth=r,i.isDrag=!1,i.preventClick=!1,i.move=!1,i.opt.resizeLock&&i.scrollTo(i.slide*i.itemWidth,0),(n||t)&&(i.bindArrows(),i.buildDots(),i.bindDrag()),i.updateControls(),i.emit(e?"refresh":"loaded")},i.bindDrag=function(){var e=this;e.mouse=e.mouse||e.handleMouse.bind(e);var t=function(){e.mouseDown=void 0,e.ele.classList.remove("drag"),e.isDrag&&(e.preventClick=!0),e.isDrag=!1};const i=function(){e.move=!0};var r={mouseup:t,mouseleave:t,mousedown:function(t){t.preventDefault(),t.stopPropagation(),e.mouseDown=t.clientX,e.ele.classList.add("drag"),e.move=!1,setTimeout(i,300)},touchstart:function(t){e.ele.classList.add("drag"),e.move=!1,setTimeout(i,300)},mousemove:e.mouse,click:function(t){e.preventClick&&e.move&&(t.preventDefault(),t.stopPropagation()),e.preventClick=!1,e.move=!1}};e.ele.classList.toggle("draggable",e.opt.draggable===!0),e.event(e.ele,"remove",r),e.opt.draggable&&e.event(e.ele,"add",r)},i.buildDots=function(){var e=this;if(!e.opt.dots)return void(e.dots&&(e.dots.innerHTML=""));if("string"==typeof e.opt.dots?e.dots=document.querySelector(e.opt.dots):e.dots=e.opt.dots,e.dots){e.dots.innerHTML="",e.dots.setAttribute("role","tablist"),e.dots.classList.add("jdgm-glider-dots");for(var t=0;t<Math.ceil(e.slides.length/e.opt.slidesToShow);++t){var i=document.createElement("button");i.dataset.index=t,i.setAttribute("aria-label","Page "+(t+1)),i.setAttribute("role","tab"),i.className="glider-dot "+(t?"":"active"),e.event(i,"add",{click:e.scrollItem.bind(e,t,!0)}),e.dots.appendChild(i)}}},i.bindArrows=function(){var e=this;return e.opt.arrows?void["prev","next"].forEach(function(t){var i=e.opt.arrows[t];i&&("string"==typeof i&&(i=document.querySelector(i)),i&&(i._func=i._func||e.scrollItem.bind(e,t),e.event(i,"remove",{click:i._func}),e.event(i,"add",{click:i._func}),e.arrows[t]=i))}):void Object.keys(e.arrows).forEach(function(t){var i=e.arrows[t];e.event(i,"remove",{click:i._func})})},i.updateControls=function(e){var t=this;e&&!t.opt.scrollPropagate&&e.stopPropagation();var i=t.containerWidth>=t.trackWidth;t.opt.rewind||(t.arrows.prev&&(t.arrows.prev.classList.toggle("disabled",t.ele.scrollLeft<=0||i),t.arrows.prev.setAttribute("aria-disabled",t.arrows.prev.classList.contains("disabled"))),t.arrows.next&&(t.arrows.next.classList.toggle("disabled",Math.ceil(t.ele.scrollLeft+t.containerWidth)>=Math.floor(t.trackWidth)||i),t.arrows.next.setAttribute("aria-disabled",t.arrows.next.classList.contains("disabled")))),t.slide=Math.round(t.ele.scrollLeft/t.itemWidth),t.page=Math.round(t.ele.scrollLeft/t.containerWidth);var r=t.slide+Math.floor(Math.floor(t.opt.slidesToShow)/2),d=Math.floor(t.opt.slidesToShow)%2?0:r+1;1===Math.floor(t.opt.slidesToShow)&&(d=0),t.ele.scrollLeft+t.containerWidth>=Math.floor(t.trackWidth)&&(t.page=t.dots?t.dots.children.length-1:0),[].forEach.call(t.slides,function(e,i){var n=e.classList,a=n.contains("visible"),o=t.ele.scrollLeft,s=t.ele.scrollLeft+t.containerWidth,l=t.itemWidth*i,c=l+t.itemWidth;[].forEach.call(n,function(e){/^left|right/.test(e)&&n.remove(e)}),n.toggle("active",t.slide===i),r===i||d&&d===i?n.add("jdgm-center"):(n.remove("jdgm-center"),n.add([r>i?"jdgm-left":"jdgm-right",Math.abs(i-(r>i?r:d||r))].join("-")));var u=Math.ceil(l)>=Math.floor(o)&&Math.floor(c)<=Math.ceil(s);n.toggle("visible",u),u!==a&&t.emit("slide-"+(u?"visible":"hidden"),{slide:i})}),t.dots&&[].forEach.call(t.dots.children,function(e,i){e.classList.toggle("active",t.page===i)}),e&&t.opt.scrollLock&&(clearTimeout(t.scrollLock),t.scrollLock=setTimeout(function(){clearTimeout(t.scrollLock),Math.abs(t.ele.scrollLeft/t.itemWidth-t.slide)>.02&&(t.mouseDown||t.trackWidth>t.containerWidth+t.ele.scrollLeft&&t.scrollItem(t.getCurrentSlide()))},t.opt.scrollLockDelay||250))},i.getCurrentSlide=function(){var e=this;return e.round(e.ele.scrollLeft/e.itemWidth)},i.scrollItem=function(e,t,i){i&&i.preventDefault();var r=this,d=e;++r.animate_id;var n,a=r.slide;if(t===!0)e=Math.round(e*r.containerWidth/r.itemWidth),n=e*r.itemWidth;else{if("string"==typeof e){var o="prev"===e;if(e=r.opt.slidesToScroll%1||r.opt.slidesToShow%1?r.getCurrentSlide():r.slide,o?e-=r.opt.slidesToScroll:e+=r.opt.slidesToScroll,r.opt.rewind){var s=r.ele.scrollLeft;e=o&&!s?r.slides.length:!o&&s+r.containerWidth>=Math.floor(r.trackWidth)?0:e}}e=Math.max(Math.min(e,r.slides.length),0),r.slide=e,n=r.itemWidth*e}return r.emit("scroll-item",{prevSlide:a,slide:e}),r.scrollTo(n,r.opt.duration*Math.abs(r.ele.scrollLeft-n),function(){r.updateControls(),r.emit("animated",{value:d,type:"string"==typeof d?"arrow":t?"dot":"slide"})}),!1},i.settingsBreakpoint=function(){var t=this,i=t._opt.responsive;if(i){i.sort(function(e,t){return t.breakpoint-e.breakpoint});for(var r=0;r<i.length;++r){var d=i[r];if(e.innerWidth>=d.breakpoint)return t.breakpoint!==d.breakpoint?(t.opt=Object.assign({},t._opt,d.settings),t.breakpoint=d.breakpoint,!0):!1}}var n=0!==t.breakpoint;return t.opt=Object.assign({},t._opt),t.breakpoint=0,n},i.scrollTo=function(t,i,r){var d=this,n=(new Date).getTime(),a=d.animate_id,o=function(){var s=(new Date).getTime()-n;d.ele.scrollLeft=d.ele.scrollLeft+(t-d.ele.scrollLeft)*d.opt.easing(0,s,0,1,i),i>s&&a===d.animate_id?e.requestAnimationFrame(o):(d.ele.scrollLeft=t,r&&r.call(d))};e.requestAnimationFrame(o)},i.removeItem=function(e){var t=this;t.slides.length&&(t.track.removeChild(t.slides[e]),t.refresh(!0),t.emit("remove"))},i.addItem=function(e,t){var i=this;t?i.track.prepend(e):(t=!1,i.track.append(e)),i.refresh(!0),i.emit("add")},i.handleMouse=function(e){var t=this;t.mouseDown&&(t.isDrag=!0,t.ele.scrollLeft+=(t.mouseDown-e.clientX)*(t.opt.dragVelocity||3.3),t.mouseDown=e.clientX)},i.round=function(e){var t=this,i=t.opt.slidesToScroll%1||1,r=1/i;return Math.round(e*r)/r},i.refresh=function(e){var t=this;t.init(!0,e)},i.setOption=function(e,t){var i=this;i.breakpoint&&!t?i._opt.responsive.forEach(function(t){t.breakpoint===i.breakpoint&&(t.settings=Object.assign({},t.settings,e))}):i._opt=Object.assign({},i._opt,e),i.breakpoint=0,i.settingsBreakpoint()},i.destroy=function(){var t=this,i=t.ele.cloneNode(!0),r=function(e){e.removeAttribute("style"),[].forEach.call(e.classList,function(t){/^glider/.test(t)&&e.classList.remove(t)})};i.children[0].outerHTML=i.children[0].innerHTML,r(i),[].forEach.call(i.getElementsByTagName("*"),r),t.ele.parentNode.replaceChild(i,t.ele),t.event(e,"remove",{resize:t.resize}),t.emit("destroy")},i.emit=function(t,i){var r=this,d=new e.CustomEvent("glider-"+t,{bubbles:!r.opt.eventPropagate,detail:i});r.ele.dispatchEvent(d)},i.event=function(e,t,i){var r=e[t+"EventListener"].bind(e);Object.keys(i).forEach(function(e){r(e,i[e])})},t}),function(){jdgmCarousel.enque(function(e){var t,i,r,d,n,a,o,s,l,c,u,g,p,m,v,f;return f=function(e){return t(e),l(e)},t=function(t){return jdgm.asyncEach(t.find(".jdgm-row-carousel .jdgm-rev"),function(i){var r,d;return r=e(i),d="#"+r.data("review-id")+"-"+t.data("unique-string"),r.find(".jdgm-rev__pic-link").attr("href",d).attr("data-mfp-src",null).attr("data-popup",!1),r.append(["<a class='jdgm-rev__read-full' href='"+d+"' aria-label='"+jdgmSettings.widget_full_review_text+"' role='button'>",jdgmSettings.widget_full_review_text,"</a>"].join(""))})},l=function(t){var i,r;return r=t.find("."+t.data("class-prefix")+"__reviews"),0===r.length&&(r=t.find(".jdgm-all-reviews__body")),i=r.clone(),i.removeClass(t.data("class-prefix")+"__reviews jdgm-all-reviews__body").addClass(t.data("class-prefix")+"__duplicated-reviews"),jdgm.asyncEach(i.find(".jdgm-rev"),function(i){var r;return r=e(i),r.prop("id",r.data("review-id")+"-"+t.data("unique-string"))}),t.find("."+t.data("class-prefix")+"__header").after(i)},c=function(){var t,i;return i=e(".jdgm-row-carousel"),i.length>0&&!i.data("started-init-popup")?(i.data("started-init-popup",!0),t=i.closest(".jdgm-widget"),t.find(".jdgm-rev__pic-link, .jdgm-rev__read-full, .jdgm-row-readmore .jdgm-btn, .jdgm-row-readmore .jdgm-link").magnificPopup({type:"inline",mainClass:"jdgm-rev-popup",closeBtnInside:!0,midClick:!0,callbacks:{open:function(){var t;return e("body").addClass("jm-mfp-is-open"),t=e(this.content),t.show(),o(t)},close:function(){return e("body").removeClass("jm-mfp-is-open")}}})):void 0},o=function(t){var i;return t.data("not-scroll-to",!0),jdgm.asyncEach(t.find("img[data-src]:not([src])"),function(t){return v(e(t))}),jdgm.asyncEach(t.find(".jdgm-rev__pic-link"),function(t){var i,r;return r=e(t),r.attr("data-mfp-src",null),i=r.clone(),r.after(i),r.remove()}),jdgm._insertIframesToYoutubeContainers(),i=t.find(".jdgm-rev__prod-variant-wrapper"),i.length&&i.css("display","block"),t.hasClass("jdgm-widget__popup-content")&&m(t),t.hasClass("jdgm-qna-widg__popup-content")&&p(t),g(t)},v=function(e){var t;return e.attr("src",e.data("src")),t=e.parent(),t.removeClass("jdgm--loading"),t.hasClass("jdgm-rev__icon")?t.addClass("jdgm-rev__avatar"):void 0},m=function(e){var t;return!e.data("started-setup-reviews")&&(e.data("started-setup-reviews",!0),e.hasClass("jdgm-rev-widg__popup-content")&&(e.find(".jdgm-rev-widg__primary-lang").length>0||jdgm._setupLoadReviewsEventsFor(e),Number(jdgmSettings.widget_review_max_height)>0&&jdgm.setupLimitingReviewHeight(e.find(".jdgm-rev"))),e.hasClass("jdgm-revs-tab__popup-content")&&(jdgm._setupLoadReviewsEventsForFRT(e),e.data("review-type")&&jdgm._loadReviewsForFRT(e,e.data("review-type"),!1)),e.hasClass("jdgm-all-reviews__popup-content"))?(t=new jdgm.AllReviewsPage(e),t.initializationPromise.then(function(){return e.data("review-type")?t.loadReviews(e.data("review-type")):void 0})):void 0},p=function(e){return e.data("started-setup-questions")?void 0:(e.data("started-setup-questions",!0),jdgm._setupPaginateForQuestionWidget(e),jdgm.fetchQuestsFirstTime(e))},g=function(t){var i,r,d;return r=t.closest(".jm-mfp-wrap"),i=t.closest(".jm-mfp-content"),d=['<div class="jdgm-rev-popup__pic-actions">','<a href="#" rel="prev" class="jdmg-rev-popup__back jdmg-rev-popup__back-icon"></a>','<a href="#" rel="prev" class="jdmg-rev-popup__back">Back</a>',"</div>"].join(""),t.off("click",".jdgm-rev__pic-link"),t.on("click",".jdgm-rev__pic-link",function(n){var a,o,s;return n.preventDefault(),i.data("offset-top",i.offset().top),t.hide(),i.find(".jdgm-rev-popup__pic").remove(),s='<div class="jdgm-rev-popup__carousel-wrapper"><div class="jdgm-rev-popup__carousel">',jdgm.asyncEach(e(this).closest(".jdgm-rev__pics").find(".jdgm-rev__pic-link"),function(t){return s+=['<div class="jdgm-rev__pic">','<img class="jdgm-rev__pic-img" alt="User picture" src="'+e(t).attr("href")+'" />',"</div>"].join("")}),s+="</div>",s+='<button aria-label="Previous" class="jdgm-rev-carousel-prev"></button>',s+='<button aria-label="Next" class="jdgm-rev-carousel-next"></button></div>',i.append('<div class="jdgm-rev-popup__pic">'+d+s+"</div"),o=new jdgm.Glider(i.find(".jdgm-rev-popup__carousel")[0],{scrollLock:!0,draggable:!0,arrows:{prev:".jdgm-rev-popup__pic .jdgm-rev-carousel-prev",next:".jdgm-rev-popup__pic .jdgm-rev-carousel-next"}}),a=e(this).index()*i.find(".jdgm-rev-popup__carousel").width(),setTimeout(function(){return o.scrollTo(a,400)},0),i.on("glider-slide-visible",".jdgm-rev-popup__carousel",function(e){var t;return t=i.find(".jdgm-rev__pic.visible .jdgm-rev__pic-img").height(),i.find(".jdgm-rev-popup__carousel-wrapper").height(t),i.find(".jdgm-glider-track").height(t)}),i.on("click",".jdgm-rev-popup__pic",function(e){return e.preventDefault(),e.stopPropagation()}),i.on("click",".jdmg-rev-popup__back",function(e){var d;return e.preventDefault(),t.show(),i.find(".jdgm-rev-popup__pic").remove(),d=r.offset().top+48-i.data("offset-top"),r.animate({scrollTop:d},0)})})},s=function(){return jdgm.eachWidgetWithReviews(function(e){var t,r;return t=e.find(".jdgm-row-carousel"),t.length>0&&!t.data("started-customize-widget-for-popup")?(t.data("started-customize-widget-for-popup",!0),r=a(e),e.data("number-of-reviews")>0&&i(e,jdgmSettings.widget_first_sub_tab),r&&d(e),n(e,r)):void 0})},a=function(e){var t;return t=!1,"jdgm-rev-widg"===e.data("class-prefix")&&(t=e.data("number-of-questions")>0),["jdgm-revs-tab","jdgm-all-reviews"].indexOf(e.data("class-prefix"))>=0&&("product-reviews"===jdgmSettings.widget_first_sub_tab&&(t=e.data("number-of-shop-reviews")>0),"shop-reviews"===jdgmSettings.widget_first_sub_tab&&(t=e.data("number-of-product-reviews")>0)),t},i=function(t,i,r){var d,n,a,o,s,l,c;return null==r&&(r=!0),s=r?"popup-primary-content":"popup-secondary-content",c="jdgm-widget__"+s+"--"+t.data("unique-string"),l="jdgm-widget__popup-content "+t.data("class-prefix")+"__popup-content",o=e("<div id='"+c+"' class='"+l+"' data-review-type='"+i+"'></div>"),o.data("id",t.data("id")),o.data("review-type",i),a=t.find(".jdgm-row-search"),o.append(a.clone()),r&&a.remove(),n=t.find(".jdgm-row-actions"),o.append(n.clone()),r&&n.remove(),"jdgm-rev-widg"===t.data("class-prefix")&&(o.append(t.find(".jdgm-rev-widg__body").detach()),o.append(t.find(".jdgm-rev-widg__paginate-spinner-wrapper").detach()),t.find(".jdgm-rev-widg__header").after(o)),"jdgm-revs-tab"===t.data("class-prefix")&&(r?o.append(t.find(".jdgm-revs-tab__content-body").detach()):(d=t.find(".jdgm-revs-tab__content-body").clone(),d.find(".jdgm-revs-tab__reviews").html(""),o.append(d)),t.find(".jdgm-revs-tab__content-header").after(o)),"jdgm-all-reviews"===t.data("class-prefix")?(r?(o.append(t.find(".jdgm-all-reviews__body:not(.jdgm-all-reviews__duplicated-reviews)").detach()),o.append(t.find(".jdgm-shop-reviews__body").detach()),o.append(t.find(".jdgm-all-reviews__footer").detach())):(o.append('<div class="jdgm-all-reviews__body"></div>'),0===o.find(".jdgm-shop-reviews__body").length&&o.append('<div class="jdgm-shop-reviews__body"></div>'),o.append(t.find(".jdgm-all-reviews__footer").clone())),0===o.find(".jdgm-spinner").length&&o.append('<div class="jdgm-spinner"></div>'),t.find(".jdgm-all-reviews__header").after(o)):void 0},d=function(t){var d,n;return"jdgm-rev-widg"===t.data("class-prefix")&&(d=e("<div id='jdgm-widget__popup-secondary-content--"+t.data("unique-string")+"' class='jdgm-widget__popup-content jdgm-qna-widg__popup-content'></div>"),d.data("id",t.data("id")),d=r(t,d),t.find(".jdgm-rev-widg__header").after(d)),["jdgm-revs-tab","jdgm-all-reviews"].indexOf(t.data("class-prefix"))>=0?(n="product-reviews"===jdgmSettings.widget_first_sub_tab?"shop-reviews":"product-reviews",i(t,n,!1)):void 0},r=function(e,t){var i;return t.data("number-of-questions",1),t.append("<h2 class='jdgm-rev-widg__title'>"+jdgmSettings.widget_questions_and_answers_text+"</h2>"),t.append("<div class='jdgm-quest-widg__body'></div>"),i=e.find(".jdgm-subtab"),i.find(".jdgm-subtab__name").removeClass("jdgm--active"),i.find('.jdgm-subtab__name[data-tabname="questions"]').addClass("jdgm--active"),t.append(i.detach()),t.append("<div class='jdgm-rev-widg__paginate-spinner-wrapper'><div class='jdgm-spinner'></div></div>"),t},n=function(t,i){var r,d,n;return null==i&&(i=!1),d=null,n=null,"jdgm-rev-widg"===t.data("class-prefix")&&(t.data("number-of-reviews")>0&&(d=jdgmSettings.widget_read_more_reviews_text),t.data("number-of-questions")>0&&(n=jdgmSettings.widget_read_questions_text)),["jdgm-revs-tab","jdgm-all-reviews"].indexOf(t.data("class-prefix"))>=0&&("product-reviews"===jdgmSettings.widget_first_sub_tab&&(t.data("number-of-product-reviews")>0&&(d=jdgmSettings.widget_product_reviews_subtab_text),t.data("number-of-shop-reviews")>0&&(n=jdgmSettings.widget_shop_reviews_subtab_text)),"shop-reviews"===jdgmSettings.widget_first_sub_tab&&(t.data("number-of-shop-reviews")>0&&(d=jdgmSettings.widget_shop_reviews_subtab_text),t.data("number-of-product-reviews")>0&&(n=jdgmSettings.widget_product_reviews_subtab_text))),r=e("<div class='jdgm-row-readmore'></div>"),null!==d&&r.append(["<a class='jdgm-btn jdgm-btn--dark' href='#jdgm-widget__popup-primary-content--"+t.data("unique-string")+"' role='button'>",d,"</a>"].join("")),i&&null!==n&&r.append(["<div class='jdgm-link-wrapper'><a class='jdgm-link' href='#jdgm-widget__popup-secondary-content--"+t.data("unique-string")+"' role='button'>",n,"</a></div>"].join("")),(null!==d||i&&null!==n)&&(t.find(".jdgm-row-carousel").after(r),document.addEventListener("jdgm.multilingual_languages_loaded",function(){return t.find(".jdgm-row-carousel").after(r)})),null===d?t.find(".jdgm-row-carousel").hide():void 0},u=function(){var t;return t=e(".jdgm-rev-popup:visible .jdgm-widget__popup-content"),t.length>0?o(t):void 0},e(document).on("jdgm.doneRenderCarousel",function(e,t){var i;return i=t.$reviewWidget,f(i)}),e(document).on("jdgm.doneLoadingMediaJs",function(e,t){return s(),c()}),e(document).on("jdgm.doneSetupARP",function(e,t){var i,r;return i=t.$widget,r=i.find(".jdgm-widget__popup-content"),r.find(".jdgm-all-reviews__footer").length<=0?(r.append(i.find(".jdgm-spinner").detach()),r.append(i.find(".jdgm-all-reviews__footer").detach())):void 0}),e(document).on("jdgm.doneCustomizeReviews",function(e,t){return u()}),e(document).on("jdgm.doneCustomizeQuestions",function(e,t){return u()}),e(document).on("jdgm.doneFetchGravatar",function(e,t){var i;return i=t.$gravatarIcon,i?v(i.find("img[data-src]:not([src])")):void 0})})}.call(this),function(){jdgmCarousel.enque(function(e){var t,i,r,d,n,a,o,s,l,c;return l=function(e){var t;return!e.data("started-customize-reviews")&&0===e.find(".jdgm-row-carousel").length&&(e.data("number-of-reviews")>0||e.data("number-of-questions")>0||e.find(".jdgm-revs-tab__reviews .jdgm-rev").length>0)?(e.data("started-customize-reviews",!0),t=s(e),c(e,t),jdgm.triggerEvent("doneRenderCarousel",{$reviewWidget:e})):void 0},s=function(e){var t,i,r;return r=[],jdgmSettings.widget_multilingual_sorting_enabled?(i=e.find(".jdgm-rev-widg__primary-lang .jdgm-rev, .jdgm-revs-tab__reviews .jdgm-rev"),t=e.find(".jdgm-rev-widg__other-lang .jdgm-rev"),r=i.add(t)):r=e.find(".jdgm-rev, .jdgm-revs-tab__reviews .jdgm-rev"),r},c=function(t,i){var r,s;return s=e("<div class='jdgm-row-carousel' data-review-type='"+jdgmSettings.widget_first_sub_tab+"'></div>"),r=e('<div class="jdgm-rev-carousel"></div>'),jdgm.asyncEach(i,function(t){return r.append(d(e(t)))}),s.append(r),t.find(".jdgm-row-stars").before(s),t.data("number-of-reviews")>0?(n(t,s),a(s),o(t),setTimeout(function(){return window.dispatchEvent(new Event("resize"))},0)):void 0},d=function(t){var d,n;return d=t.clone(),r(d),i(d),n=[".jdgm-rev__custom-form",".jdgm-rev__pics",".jdgm-rev__vids",".jdgm-rev__social",".jdgm-rev__reply"],d.find(n.join(",")).remove(),d.find("img[data-src]").unveil(0,function(){return e(this).parent(".jdgm-rev__icon").removeClass("jdgm--loading").addClass("jdgm-rev__avatar"),e(this).removeClass("jdgm--loading")}),d},r=function(t){var i;return i=e('<div class="jdgm-rev__media"></div>'),i.append(t.find(".jdgm-rev__pic-link").detach()),t.find(".jdgm-rev__body").after(i)},n=function(e,t){var i,r,d,n,a;return d=t.width(),n=420>d?1:2,n=680>d?2:3,a=420>d?1:2,r="jdgm-carousel-"+e.data("unique-string"),t.addClass(r),t.append('<button aria-label="Previous" class="jdgm-rev-carousel-prev"></button>'),t.append('<button aria-label="Next" class="jdgm-rev-carousel-next"></button>'),i=new jdgm.Glider(t.find(".jdgm-rev-carousel")[0],{draggable:!0,arrows:{prev:"."+r+" .jdgm-rev-carousel-prev",next:"."+r+" .jdgm-rev-carousel-next"},responsive:[{breakpoint:767,settings:{slidesToShow:a}},{breakpoint:991,settings:{slidesToShow:n}}]}),t.data("carousel",i)},a=function(t){return jdgm.asyncEach(t.find(".jdgm-rev"),function(t){var i,r,d,n;return r=e(t),d=r.find(".jdgm-rev__body"),n=d.css("lineHeight").replace("px",""),i=e(d.find("p")[0]),d.text(i.text()),d.height(4*n),r.find(".jdgm-rev__title").height(n)})},i=function(i){var r;return r=i.find(".jdgm-rev__vids .jdgm-vid-player, .jdgm-rev__vids .jdgm-yt-video"),jdgm.asyncEach(r,function(r){var d,n,a,o;return d=e(r),d.hasClass("jdgm-yt-video")?(a="https://img.youtube.com/vi/"+d.data("id")+"/default.jpg",n="https://www.youtube.com/embed/"+d.data("id")+"?rel=0&showinfo=0&autoplay=0&cc_load_policy=1",t(i,a,n)):(o=d.data("external-id"))?o.length>16?(a="https://videodelivery.net/"+o+"/thumbnails/thumbnail.jpg?time=1s&height=120",n="https://iframe.videodelivery.net/"+o,t(i,a,n)):(n="https://vimeo.com/"+o,e.ajax({url:"https://vimeo.com/api/oembed.json",data:{url:n},success:function(e){return t(i,e.thumbnail_url,n)}})):void 0})},t=function(t,i,r){var d,n;return n=e("<img class='jdgm-rev__pic-img' alt='User picture' src='"+i+"' />"),d=e("<a class='jdgm-rev__pic-link jdgm-rev__vid-link' target='_blank' rel='nofollow noopener'></a>"),d.append(n),d.attr("href",r),t.find(".jdgm-rev__media").append(d)},o=function(e){return e.off("click",".jdgm-paginate__page:not(.jdgm-curt)"),e.off("change",".jdgm-review-search")},e(document).on("jdgm.doneCustomizeReviews",function(t,i){var r,d,n,a;return n=i.$reviews,r=n.filter(e(".jdgm-rev--pending")),r.length>0?(d=r.closest(".jdgm-widget"),a=d.find(".jdgm-row-carousel"),a.data("carousel").addItem(r[0],!0)):void 0}),jdgm.eachWidgetWithReviews(function(e){return l(e),document.addEventListener("jdgm.multilingual_languages_loaded",function(){return e.data("started-customize-reviews",!1),e.find(".jdgm-row-carousel").remove(),l(e)})})})}.call(this);